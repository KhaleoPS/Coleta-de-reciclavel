# Configurações para o perfil de teste (usado no GitHub Actions)

# Conexão com o banco de dados de serviço do GitHub Actions via localhost
# Esta é a forma mais robusta, pois a porta do serviço é mapeada diretamente.
spring.datasource.url=jdbc:postgresql://localhost:5432/testdb
spring.datasource.username=testuser
spring.datasource.password=testpassword

# 'create-drop' é ideal para testes: cria o schema no início e o apaga no final.
spring.jpa.hibernate.ddl-auto=create-drop

# Especifica o dialeto do PostgreSQL para o Hibernate.
# Isso evita problemas de detecção automática caso a conexão inicial demore.
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# Desativa a autoconfiguração de segurança para o perfil de teste,
# permitindo que os testes de controller rodem sem precisar de autenticação.
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration,org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration
